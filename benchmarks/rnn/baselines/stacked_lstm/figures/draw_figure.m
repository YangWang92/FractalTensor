clc
clear
close all;

%%
map = addcolorplus(319);
num = 7;

idx = linspace(5,60,num);
idx = round(idx);
C = map(idx,:);
%%
% t = tiledlayout(2, 1, 'TileSpacing','compact','Padding','compact');
% nexttile
% 
% subtitle('(a). The elapsed time varied according to depth.',...
%     'FontName','Helvetica', 'FontSize', 16)
% hold on

figure;

filename1 = 'perf_with_increased_depth_subplot1.tsv';
data = tdfread(filename1, '\t');

x = reshape(data.AvgTime, 6,6);

%%
figureUnits = 'centimeters';
figureWidth = 16;
figureHeight = 6;

set(gcf, 'Units', figureUnits, 'Position', [0 0 figureWidth figureHeight]);

%%
GO = bar(x,1,'EdgeColor','k', 'LineWidth', 0.5);


GO(1).FaceColor = C(1,:);
GO(2).FaceColor = C(2,:);
GO(3).FaceColor = C(3,:);
GO(4).FaceColor = C(5,:);
GO(5).FaceColor = C(6,:);
GO(6).FaceColor = C(7,:);

%%
set(gca, 'Box', 'on', ...
    'XGrid', 'off', 'YGrid', 'on', ...
    'TickDir', 'in', 'TickLength', [.01 .01], ...
    'XMinorTick', 'off', 'YMinorTick', 'off', ...
    'XColor', [.1 .1 .1],  'YColor', [.1 .1 .1],...
    'YTick', 0:20:80,...
    'Ylim' , [0 85], ...
    'Xticklabel',{'1' '4' '8' '12' '16', '20'},...
    'Yticklabel',{0:20:80})

hYLabel = ylabel('Elapsed Time(ms)');
hLegend = legend([GO(1),GO(2),GO(3),GO(4),GO(5),GO(6)], ...
    'PT-JIT',...
    'TF-WhileOpLSTM',...
    'TF-GraphMode',...
    'TF-AutoGraph',...
    'TVM-Ansor', ...
    'CuDNN',...
    'Location', 'northeast', ...
    'Box', 'off');

P = hLegend.Position;
hLegend.Position = P + [0.015 0.03 0 0];

set(gca, 'FontName', 'Helvetica', 'FontSize', 12)
set([hYLabel,hLegend], 'FontName',  'Helvetica')
set([hYLabel,hLegend], 'FontSize', 14)

set(gca,'Color',[1 1 1])

%%
figure;
% nexttile
% 
% subtitle('(b). The increasing ratio of time varied according to depth.',...
%     'FontName','Helvetica', 'FontSize', 16)

filename2 = 'perf_with_increased_depth_subplot2.tsv';
data = tdfread(filename2, '\t');

Y = reshape(data.Ratio, 20, 6);
y1 = Y(:,1);
y2 = Y(:,2);
y3 = Y(:,3);
y4 = Y(:,4);
y5 = Y(:,5);
y6 = Y(:,6);
yRef = 1:1:20;

x = 1:1:20;

%%
figureUnits = 'centimeters';
figureWidth = 16;
figureHeight = 8;

%%
set(gcf, 'Units', figureUnits, 'Position', [0 0 figureWidth figureHeight]);
hold on

Line1 = line(x,y1);
Line2 = line(x,y2);
Line3 = line(x,y3);
Line4 = line(x,y4);
Line5 = line(x,y5);
Line6 = line(x,y6);
LineRef = line(x, yRef);

set(Line1, 'LineStyle','--',...
    'Marker', 'o',...
    'MarkerSize', 8,...
    'MarkerEdgeColor',[0,0,0],'MarkerFaceColor',C(1,:),...
    'LineWidth', 1.5,...
    'Color', C(1,:))
set(Line2, 'LineStyle', '--',...
    'Marker', 'o',...
    'MarkerSize', 8,...
    'MarkerEdgeColor',[0,0,0],'MarkerFaceColor',C(2,:),...
    'LineWidth', 1.5,...
    'Color', C(2,:))
set(Line3, 'LineStyle', '--',...
    'Marker', 'o',...
    'MarkerSize', 8,...
    'MarkerEdgeColor',[0,0,0],'MarkerFaceColor',C(3,:),...
    'LineWidth', 1.5,...
    'Color', C(3,:))
set(Line4, 'LineStyle', '--',...
    'Marker', 'o',...
    'MarkerSize', 8,...
    'MarkerEdgeColor',[0,0,0],'MarkerFaceColor',C(5,:),...
    'LineWidth', 1.5,...
    'Color', C(5,:))
set(Line5, 'LineStyle', '--',...
    'Marker', 'o',...
    'MarkerSize', 8,...
    'MarkerEdgeColor',[0,0,0],'MarkerFaceColor',C(6,:),...
    'LineWidth', 1.5,...
    'Color', C(6,:))
set(Line6, 'LineStyle','--',...
    'Marker', 'o',...
    'MarkerSize', 8,...
    'MarkerEdgeColor',[0,0,0],'MarkerFaceColor',C(7,:),...
    'LineWidth', 1.5,...
    'Color', C(7,:))

set(LineRef,'LineStyle','-',...
    'LineWidth', 4,  'Color', 'k')

set(gca, 'Box', 'on', ...
    'XGrid', 'on', 'YGrid', 'on', ...
    'TickDir', 'in', 'TickLength', [.01 .01], ...
    'XMinorTick', 'off', 'YMinorTick', 'off', ...
    'XColor', [.1 .1 .1],  'YColor', [.1 .1 .1],...
    'XTick', 1:3:21,  'YTick', 0:5:25,...
    'Xlim',[0.5 20.5],'Ylim' ,[0 26], ...
    'Xticklabel',{1:3:20},...
    'Yticklabel',{0:5:25})

hYLabel = ylabel('Ratio');
hLegend = legend([Line1,Line2,Line3,Line4,Line5,Line6,LineRef], ...
    'PT-JIT',...
    'TF-WhileOpLSTM',...
    'TF-GraphMode',...
    'TF-AutoGraph',...
    'TVM-Ansor', ...
    'CuDNN', ...
    'baseline',...
    'Location', 'northwest', ...
    'Box', 'off');

set(gca, 'FontName', 'Helvetica', 'FontSize', 12)
set([hYLabel,hLegend], 'FontName',  'Helvetica')
set([hYLabel,hLegend], 'FontSize', 14)
set(gca,'Color',[1 1 1])
